import { Tab, Tabs } from '@rspress/core/theme';

# Middleware для ограничения времени выполнения

Предоставляет поддержку middleware для обработки таймаутов.

## Сценарии использования

В веб-сервисах некоторые запросы могут обрабатываться слишком долго по разным причинам (например, медленные запросы к базе данных, задержки ответов внешних сервисов и т.д.). Чтобы предотвратить потребление ресурсов сервера длительными запросами и их влияние на обработку других запросов, можно использовать middleware для ограничения времени выполнения, устанавливающее максимальный лимит времени обработки запроса. При превышении этого лимита запрос автоматически прерывается с возвратом ошибки таймаута.

_**Пример кода**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/timeout/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/timeout/Cargo.toml"
  ```
  </Tab>
</Tabs>

В приведённом примере созданы две функции-обработчика: быстрый `fast` и медленный `slow`, который задерживает ответ на 6 секунд. Для всех запросов установлено ограничение времени в 5 секунд с помощью `Timeout::new(Duration::from_secs(5))`. При обращении к пути `/slow` запрос превысит лимит времени из-за обработки дольше 5 секунд. В то же время запрос к пути `/fast` будет обработан нормально и вернёт результат.
{/* Auto generated, origin file hash:6b1b3f8e371841e4b0fca9bc07d59eec */}