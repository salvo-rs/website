# Envio de Arquivos

O Salvo pode enviar arquivos de várias maneiras:

import { Tab, Tabs } from '@rspress/core/theme';

### NamedFile

O Salvo fornece `salvo::fs::NamedFile`, que pode ser usado para enviar arquivos de forma eficiente aos clientes. Ele não carrega o arquivo inteiro na memória; em vez disso, lê e envia apenas as partes solicitadas pelo cliente com base no cabeçalho `Range`.

Na prática, usar `Response::send_file` é uma forma simplificada de utilizar `NamedFile`. Se você precisar de mais controle sobre o envio do arquivo, pode usar `NamedFileBuilder`.

Você pode criar um `NamedFileBuilder` através de `NamedFile::builder`:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    let builder = NamedFile::builder("/file/to/path");
}
```

Após configurar o builder, você pode enviar o arquivo:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    NamedFile::builder("/file/to/path").attached_name("image.png").send(req.headers(), res).await;
}
```

### Servir Arquivos Estáticos

Middleware para servir arquivos estáticos ou arquivos embutidos.

- `StaticDir` fornece suporte para servir arquivos estáticos a partir de diretórios locais. Você pode passar uma lista de vários diretórios como argumentos. Por exemplo:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Se um arquivo não for encontrado no primeiro diretório, ele será procurado no segundo diretório.

- Fornece suporte para `rust-embed`. Por exemplo:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>
  O método `with_fallback` permite especificar um arquivo de fallback para servir quando o arquivo solicitado não for encontrado. Isso é particularmente útil para aplicações de página única (SPAs).
{/* Auto generated, origin file hash:b0d7ec4cd7a0db7f38dc82b19bff22c8 */}