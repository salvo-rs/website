# Статический сервер

import { Tab, Tabs } from '@rspress/core/theme';

Промежуточное ПО для обслуживания статических файлов или встроенных файлов. Подробное API смотрите в [документации](https://docs.rs/salvo_extra/latest/salvo_extra/request_id/index.html).

## Сценарии применения
Обслуживание статических файлов широко применяется в веб-приложениях:
- Предоставление статических ресурсов сайта, таких как CSS, JavaScript, изображения и другие файлы
- Хостинг одностраничных приложений (SPA)
- Распространение документации, медиафайлов, загружаемого контента и т.д.
- Полное решение для хостинга простых веб-сайтов

## Основные функции

- `StaticDir` предоставляет поддержку статических локальных папок. Можно передавать список из нескольких папок в качестве параметра. Например:

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Если файл не найден в первой папке, поиск продолжится во второй.

`StaticDir` поддерживает приоритетную отправку сжатых файлов при их наличии. Например, если существуют файлы `index.html`, `index.html.gz`, `index.html.zst`, `index.html.br`, то `index.html.gz`, `index.html.zst`, `index.html.br` считаются предварительно сжатыми версиями `index.html`. В зависимости от информации в запросе будет отправлен соответствующий сжатый файл.

- Предоставляет поддержку `rust-embed`, например:

## Преимущества и недостатки rust-embed

**Преимущества:**
- Компиляция статических файлов в бинарный файл, упрощающая процесс развертывания
- Не требуется отдельное управление статическими файлами в производственной среде
- Возможное повышение производительности (доступ к памяти vs дисковый ввод-вывод)
- Повышенная безопасность — файлы не могут быть случайно изменены

**Недостатки:**
- Увеличение размера бинарного файла приложения
- Обновление статического контента требует перекомпиляции и повторного развертывания всего приложения
- Не подходит для крупного статического контента, который часто меняется

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>

Можно установить страницу по умолчанию с помощью `default`. `with_fallback` и `fallback` позволяют указать файл для отображения, если запрошенный файл не найден. Это полезно, например, для некоторых одностраничных веб-приложений.
{/* Auto generated, origin file hash:42f7ce7c0dec48cc37b3300fbc400bb8 */}