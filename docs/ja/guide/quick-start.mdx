import { Tab, Tabs } from '@rspress/core/theme';

# クイックスタート

## Rustのインストール
Rustがまだインストールされていない場合は、公式が提供する（`rustup`）[https://doc.rust-lang.org/book/ch01-01-installation.html]を使用してRustをインストールできます。

:::tip
現在、Salvoがサポートする最低Rustバージョンは1.89です。`rustup update`を実行して、要件を満たすRustがインストールされていることを確認してください。
:::

## 最初のSalvoプログラムを作成する

新しいプロジェクトを作成します：

```bash
cargo new hello --bin
```

依存関係を`Cargo.toml`に追加します：

```toml file="<root>/codes/hello/Cargo.toml"
```

`main.rs`に、`hello`という名前のシンプルな関数ハンドラを作成します。この関数は単にテキスト`"Hello world"`を出力します。

```rust file="<root>/codes/hello/src/main.rs"
```

おめでとうございます！あなたの最初のSalvoプログラムが完成しました。コマンドラインで`cargo run`を実行し、ブラウザで`http://127.0.0.1:5800`を開くだけです。

## 詳細な解説

ここでの`hello_world`は、ユーザーリクエストを処理するための`Handler`です。`#[handler]`を使用すると、関数が簡単に`Handler`トレイトを実装できるようになります。また、関数のパラメータをさまざまな方法で簡潔に記述することができます。

- 元の形式：

    ```rust
    #[handler]
    async fn hello(_req: &mut Request, _depot: &mut Depot, res: &mut Response, _ctrl: &mut FlowCtrl) {
        res.render("Hello world");
    }
    ```

- 使用されていないパラメータは省略できます。例えば、ここでは`_req`、`_depot`、`_ctrl`が使用されていないため、直接記述を省略できます：

    ```rust
    #[handler]
    async fn hello(res: &mut Response) {
        res.render("Hello world");
    }
    ```

- `Writer`トレイトを実装している任意の型を関数の戻り値の型として使用できます。例えば、`&str`は`Writer`を実装しており、戻り値として使用されるときはプレーンテキストとして出力されます：

    ```rust
    #[handler]
    async fn hello(res: &mut Response) -> &'static str {
        "Hello world"
    }
    ```

- より一般的なケースでは、関数の実行中にエラーを処理できるように、戻り値の型として`Result<T, E>`を使用する必要があります。`T`と`E`の両方が`Writer`を実装している場合、`Result<T, E>`を戻り値として使用できます：

    ```rust
    #[handler]
    async fn hello(res: &mut Response) -> Result<&'static str, ()> {
        Ok("Hello world")
    }
    ```

## 軽やかなHTTP3

HTTP3は軽やかで素早いと言われており、多くのプログラマーが憧れています。今回、Salvoはその願いを叶え、HTTP3が提供する素晴らしいサービスを簡単に楽しめるようにします！

まず、`Cargo.toml`でHTTP3機能を有効にし、`main.rs`を次のように変更します：
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/hello-h3/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/hello-h3/Cargo.toml"
  ```
  </Tab>
</Tabs>

## Salvo CLIツール 🛠️

[Salvo CLI](https://github.com/salvo-rs/salvo-cli)は、Salvo Webフレームワーク向けに設計されたツールで、整理された読みやすいコードを作成し、あなたの貴重な時間を人生のより楽しいことに使えるようにします。

CLIの改善アイデアや、解決すべき問題を見つけた場合は、ぜひ遠慮なくissueを提出してください。あなたの意見を歓迎します。

### ステップ1

CLIツールをインストールします：

```bash
cargo install salvo-cli
```

### ステップ2

> 新しいSalvoプロジェクトを作成するには、`new`コマンドの後にプロジェクト名を指定します：
>
> ```bash
> salvo new project_name
> ```

このシンプルなCLIツールを使用して、Salvoプロジェクトを迅速に開始し、プロジェクト構造の構築ではなく、ビジネスロジックの実装に集中できます。 ✨

## その他の例

Salvoリポジトリを直接クローンし、examplesディレクトリ内のサンプルを実行することをお勧めします。例えば、次のコマンドで`hello`の例を実行できます：

```sh
git clone https://github.com/salvo-rs/salvo
cd salvo/examples
cargo run --bin example-hello
```

examplesディレクトリには多くのサンプルがあります。これらはすべて、`cargo run --bin example-<name>`のようなコマンドで実行できます。
{/* Auto generated, origin file hash:0c4a88ceb8e2d80be891a10caa082999 */}