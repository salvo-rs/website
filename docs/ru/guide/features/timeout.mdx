import { Tab, Tabs } from '@rspress/core/theme';

# Промежуточное ПО для таймаута

Предоставляет поддержку таймаутов через промежуточное ПО.

## Сценарии использования

В веб-сервисах некоторые запросы могут обрабатываться слишком долго по разным причинам (например, медленные запросы к базе данных, задержки ответов от внешних сервисов и т.д.). Чтобы предотвратить блокировку ресурсов сервера длительными запросами, которые могут повлиять на обработку других запросов, можно использовать промежуточное ПО для таймаутов, устанавливающее максимальное время обработки запроса. Если лимит времени превышен, запрос автоматически прерывается и возвращается ошибка таймаута.

_**Пример кода**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/timeout/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/timeout/Cargo.toml"
  ```
  </Tab>
</Tabs>

В приведённом примере созданы две функции обработки: `fast` (быстрый ответ) и `slow` (ответ с задержкой в 6 секунд). С помощью `Timeout::new(Duration::from_secs(5))` для всех запросов установлено ограничение таймаута в 5 секунд. При обращении к пути `/slow` запрос превысит лимит в 5 секунд и завершится таймаутом, тогда как запрос к пути `/fast` обработается нормально и вернёт результат.
{/* Auto generated, origin file hash:f830ce34e2005274bbd246ff55e7c47e */}