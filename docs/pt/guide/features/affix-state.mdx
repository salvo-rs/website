# Estado de Afixo - Dados Compartilhados em Requisições

import { Tab, Tabs } from '@rspress/core/theme';

O middleware Estado de Afixo é utilizado para adicionar dados compartilhados ao Depot.
Para utilizar o recurso Estado de Afixo, é necessário habilitar o recurso `affix-state` no Cargo.toml.

## Análise do Recurso
O Estado de Afixo oferece uma maneira simples de compartilhar dados durante o processamento de requisições. Ele permite que você:

- Injete configurações globais ou dados compartilhados durante a configuração de rotas
- Acesse esses dados via Depot em qualquer manipulador
- Suporte qualquer tipo clonável como dados de estado

## Comparação com Outros Frameworks para Compreensão Rápida do Conceito
| Framework | Linguagem | Abordagem de Gerenciamento de Estado |
|-----------|----------|--------------------------------------|
| Salvo (Estado de Afixo) | Rust | Armazena e acessa via Depot, suporta múltiplos tipos |
| Axum | Rust | Armazena estado via Extension, similar mas com uso diferente |
| Actix-web | Rust | Utiliza App Data e Web::Data para compartilhar estado |
| Gin | Go | Usa context.Set e context.Get para armazenar e recuperar dados |
| Echo | Go | Usa context.Set e context.Get para gerenciar estado compartilhado |
| Spring | Java | Utiliza ApplicationContext ou anotações @Bean para gerenciamento de dependências |
| Quarkus | Java | Usa mecanismos CDI e injeção de dependência |
| Express.js | JavaScript | Usa app.locals ou req.app.locals para armazenar estado global |
| Nest.js | JavaScript | Utiliza um sistema de injeção de dependência para gerenciar serviços compartilhados |
| Koa.js | JavaScript | Usa ctx.state para armazenar estado no nível da requisição |

## Casos de Uso Comuns

- Compartilhamento de pool de conexões de banco de dados
- Compartilhamento de configurações da aplicação
- Compartilhamento de instâncias de cache
- Compartilhamento de clientes de API
- Contadores globais ou rastreamento de estado

A vantagem do Estado de Afixo está na sua simplicidade e flexibilidade, permitindo o compartilhamento fácil de qualquer tipo de dados entre diferentes rotas e manipuladores sem a necessidade de código repetitivo extensivo.
_**Código de Exemplo**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/affix-state/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/affix-state/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:ab33e7002b7895dc8f4c574665f3af4f */}