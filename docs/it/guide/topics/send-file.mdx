# Invio di File

Salvo consente l'invio di file attraverso diverse modalità:

import { Tab, Tabs } from '@rspress/core/theme';

### NamedFile

Salvo mette a disposizione `salvo::fs::NamedFile`, che permette di inviare file al client in modo efficiente. Non carica l'intero file in memoria, ma trasmette solo le porzioni di contenuto richieste in base all'intestazione `Range` della richiesta.

In pratica, l'utilizzo di `Response::send_file` rappresenta una forma semplificata di `NamedFile`. Per un controllo più granulare sull'invio dei file, è possibile utilizzare `NamedFileBuilder`.

È possibile creare un `NamedFileBuilder` tramite `NamedFile::builder`:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    let builder = NamedFile::builder("/file/to/path");
}
```

Dopo aver configurato le impostazioni desiderate, il file può essere inviato:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    NamedFile::builder("/file/to/path").attached_name("image.png").send(req.headers(), res).await;
}
```

### Servizio Statico

Middleware che fornisce file statici o incorporati come servizio.

- `StaticDir` offre supporto per cartelle locali statiche. Accetta come parametro un elenco di più directory. Ad esempio:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Se il file non viene trovato nella prima cartella, la ricerca prosegue nella seconda.

- Include supporto per `rust-embed`, ad esempio:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>
  `with_fallback` consente di specificare un file alternativo da utilizzare quando il file richiesto non è disponibile, funzionalità utile per applicazioni web single-page.
{/* 本行由工具自动生成,原文哈希值:19063883c45fafc63ab4ff3751ac9892 */}