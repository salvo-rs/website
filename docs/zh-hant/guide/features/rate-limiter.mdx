# 流量控制

提供流量控制功能的中介軟體。

import { Tab, Tabs } from '@rspress/core/theme';

## 主要功能

* `RateIssuer` 提供分配識別訪問者身份鍵值的抽象功能。`RemoteIpIssuer` 是其實作之一，可依據請求的 IP 位址識別訪問者。鍵值不限於字串類型，任何符合 `Hash + Eq + Send + Sync + 'static` 約束的型別皆可作為鍵值。

* `RateGuard` 提供流量控制演算法的抽象功能。預設實作了固定視窗(`FixedGuard`)與滑動視窗(`SlidingGuard`)兩種演算法。

* `RateStore` 提供資料存取操作的抽象功能。`MokaStore` 是基於 `moka` 的內建記憶體快取實作。您也可以自訂實作方式。

* `RateLimiter` 是實作 `Handler` 的結構體，其內部包含 `skipper` 欄位，可用於指定跳過不需限流的請求。預設使用 `none_skipper`，即不跳過任何請求。

* `QuotaGetter` 提供配額取得機制的抽象功能，可依據訪問者的 `Key` 取得配額物件，這意味著我們能將使用者配額等資訊配置於資料庫中，實現動態調整與即時取得。

_**範例程式碼**_ 

### 靜態配額範例

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/rate-limiter-static/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/rate-limiter-static/Cargo.toml"
  ```
  </Tab>
</Tabs>

### 動態配額範例

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/rate-limiter-dynamic/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/rate-limiter-dynamic/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:3d248fa793d9b3aab28760c03d743c7a */}