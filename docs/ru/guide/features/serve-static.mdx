# Статический сервер

import { Tab, Tabs } from '@rspress/core/theme';

Промежуточное ПО для обслуживания статических или встроенных файлов. Подробную информацию об API смотрите в [документации](https://docs.rs/salvo_extra/latest/salvo_extra/request_id/index.html).

## Области применения
Серверы статических файлов широко применяются в веб-разработке:
- Обслуживание статических ресурсов для веб-сайтов, таких как CSS, JavaScript, изображения и т.д.
- Хостинг одностраничных приложений (SPA)
- Распространение документов, медиафайлов, загружаемого контента и т.д.
- Использование в качестве полного хостинг-решения для простых веб-сайтов

## Основные возможности

- `StaticDir` обеспечивает поддержку обслуживания статических файлов из локальных каталогов. Может принимать список из нескольких каталогов в качестве параметров. Например:

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Если файл не найден в первом каталоге, поиск продолжится во втором.

`StaticDir` поддерживает обслуживание предварительно сжатых файлов при их наличии. Например, если существуют файлы `index.html`, `index.html.gz`, `index.html.zst` и `index.html.br`, то `index.html.gz`, `index.html.zst` и `index.html.br` считаются предварительно сжатыми версиями `index.html`. Соответствующий сжатый файл будет предоставлен на основе информации в запросе.

- Обеспечивает поддержку `rust-embed`. Например:

## Преимущества и недостатки rust-embed

**Преимущества:**
- Компиляция статических файлов в бинарный файл, что упрощает развертывание.
- Отсутствие необходимости отдельного управления статическими файлами в производственных средах.
- Потенциально лучшая производительность (доступ к памяти против дискового ввода-вывода).
- Повышенная безопасность, так как файлы не могут быть случайно изменены.

**Недостатки:**
- Увеличение размера бинарного файла приложения.
- Обновление статического контента требует перекомпиляции и повторного развертывания всего приложения.
- Не подходит для крупного статического контента, который часто изменяется.

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>

Вы можете установить страницу по умолчанию для отображения с помощью опции `default`. Методы `with_fallback` и `fallback` позволяют указать резервный файл для обслуживания, когда запрошенный файл не найден, что полезно для некоторых одностраничных веб-приложений.
{/* Auto generated, origin file hash:073ef52649e7c613a5829d94d56d9114 */}