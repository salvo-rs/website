# Affix State - Gemeinsame Daten in Anfragen

import { Tab, Tabs } from 'rspress/theme';
import MainCode from '../../../../codes_md/affix-state/src/main.mdx';
import CargoCode from '../../../../codes_md/affix-state/Cargo.mdx';

Das Affix State Middleware dient dazu, gemeinsame Daten im Depot zu speichern.
Um die Affix State-Funktionalität zu nutzen, muss das `affix-state` Feature in der Cargo.toml aktiviert werden.

## Funktionsanalyse
Affix State bietet eine einfache Möglichkeit, Daten während der Anfrageverarbeitung gemeinsam zu nutzen. Es ermöglicht Ihnen:

Globale Konfigurationen oder gemeinsame Daten in der Routenkonfigurationsphase einzufügen
Zugriff auf diese Daten über Depot in jedem Handler
Unterstützung für jeden klonbaren Typ als Zustandsdaten

## Vergleich mit anderen Frameworks - Konzepte schnell verstehen
| Framework | Sprache | Zustandsverwaltung |
|-----------|---------|-------------------|
| Salvo (Affix State) | Rust | Speicherung und Zugriff über Depot, unterstützt verschiedene Typen |
| Axum | Rust | Zustandsspeicherung über Extension, ähnlich aber mit anderer Nutzung |
| Actix-web | Rust | Verwendung von App Data und Web::Data für gemeinsamen Zustand |
| Gin | Go | Nutzung von context.Set und context.Get für Datenzugriff |
| Echo | Go | Verwaltung des gemeinsamen Zustands mit context.Set und context.Get |
| Spring | Java | Verwaltung von Abhängigkeiten mit ApplicationContext oder @Bean-Annotation |
| Quarkus | Java | Nutzung von CDI und Dependency-Injection-Mechanismen |
| Express.js | JavaScript | Globale Zustandsspeicherung mit app.locals oder req.app.locals |
| Nest.js | JavaScript | Verwaltung gemeinsamer Dienste mit Dependency-Injection-System |
| Koa.js | JavaScript | Speicherung anfragespezifischer Zustände mit ctx.state |

## Häufige Anwendungsfälle

- Gemeinsame Nutzung von Datenbankverbindungspools
- Freigabe von Anwendungskonfigurationen
- Gemeinsame Nutzung von Cache-Instanzen
- Freigabe von API-Clients
- Globale Zähler oder Zustandsverfolgung

Der Vorteil von Affix State liegt in seiner Einfachheit und Flexibilität, die es ermöglicht, Daten verschiedenster Typen problemlos zwischen verschiedenen Routen und Handlern zu teilen, ohne umfangreichen Boilerplate-Code.
_**Beispielcode**_

<Tabs>
  <Tab label="main.rs">
    <MainCode/>
  </Tab>
  <Tab label="Cargo.toml">
    <CargoCode/>
  </Tab>
</Tabs>
{/* 本行由工具自动生成,原文哈希值:983c6e0b4ca9ff5e194da5a41d8d46f7 */}