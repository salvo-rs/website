```typescript
import { Tab, Tabs } from 'rspress/theme';
import ConcurrencyLimiterCode from '../../../../codes_md/concurrency-limiter/src/main.mdx';
import ConcurrencyLimiterCargoCode from '../../../../codes_md/concurrency-limiter/Cargo.mdx';
```

# Ограничение количества одновременных запросов

Промежуточное ПО Concurrency Limiter позволяет контролировать количество одновременно обрабатываемых запросов. Подробное описание API доступно в [документации](https://docs.rs/salvo_extra/latest/salvo_extra/concurrency_limiter/index.html).

## Сценарии применения

Ограничитель параллелизма особенно полезен в следующих случаях:

- **Защита высоконагруженных сайтов**: ограничение количества одновременных запросов при всплесках трафика для предотвращения перегрузки сервера
- **Контроль ресурсоемких операций**: ограничение параллелизма для операций, интенсивно использующих ресурсы, таких как загрузка файлов или запись в базу данных
- **Ограничение вызовов сторонних API**: контроль количества одновременных запросов при работе с внешними сервисами, имеющими ограничения по частоте

## Основные функции

- **Предотвращение перегрузки сервера**: поддержание стабильной работы сервера в периоды пиковой нагрузки
- **Повышение надежности системы**: исключение сбоев из-за исчерпания ресурсов
- **Оптимизация распределения ресурсов**: обеспечение доступности ресурсов для критически важных сервисов

## Способ использования

Достаточно добавить промежуточное ПО `max_concurrency(n)` к маршруту, где `n` — максимально допустимое количество одновременных запросов. Запросы, превышающие этот лимит, получат ответ `503 Service Unavailable`.

_**Пример кода**_

<Tabs>
  <Tab label="main.rs">
    <ConcurrencyLimiterCode/>
  </Tab>
  <Tab label="Cargo.toml">
    <ConcurrencyLimiterCargoCode/>
  </Tab>
</Tabs>
```
{/* 本行由工具自动生成,原文哈希值:764c09662183beca5fb5634badcad7bb */}