# Contrôle de flux

Middleware fournissant des fonctionnalités de contrôle de flux.

import { Tab, Tabs } from '@rspress/core/theme';

## Fonctionnalités principales

* `RateIssuer` fournit une abstraction pour l'identification des visiteurs via des clés attribuées. `RemoteIpIssuer` en est une implémentation qui détermine les visiteurs selon l'adresse IP des requêtes. La clé n'est pas nécessairement de type chaîne de caractères ; tout type satisfaisant les contraintes `Hash + Eq + Send + Sync + 'static` peut servir de clé.

* `RateGuard` offre une abstraction pour les algorithmes de contrôle de flux. Deux implémentations par défaut sont fournies : fenêtre fixe (`FixedGuard`) et fenêtre glissante (`SlidingGuard`).

* `RateStore` permet les opérations de stockage et de récupération des données. `MokaStore` est une implémentation de cache en mémoire intégrée, basée sur `moka`. Vous pouvez également définir votre propre implémentation.

* `RateLimiter` est une structure implémentant `Handler`, contenant également un champ `skipper` permettant de spécifier les requêtes à exclure de la mise en cache. Par défaut, `none_skipper` est utilisé pour ne sauter aucune requête.

* `QuotaGetter` fournit une abstraction pour l'obtention de quotas, permettant de récupérer un objet de quota en fonction de la clé (`Key`) du visiteur. Cela signifie que nous pouvons configurer des informations telles que les quotas utilisateurs dans une base de données, les modifier dynamiquement et les récupérer dynamiquement.

_**Exemple de code**_ 

### Exemple de quota statique

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/rate-limiter-static/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/rate-limiter-static/Cargo.toml"
  ```
  </Tab>
</Tabs>

### Exemple de quota dynamique

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/rate-limiter-dynamic/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/rate-limiter-dynamic/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:3d248fa793d9b3aab28760c03d743c7a */}