import { Tab, Tabs } from '@rspress/core/theme';

# Concurrency Limitation

The Concurrency Limiter middleware can control the number of concurrent requests. For specific API details, please [refer to the documentation](https://docs.rs/salvo_extra/latest/salvo_extra/concurrency_limiter/index.html).

## Application Scenarios

The concurrency limiter is particularly useful in the following scenarios:

- **High-Traffic Website Protection**: Limits the number of simultaneously processed requests during traffic surges to prevent server overload.
- **Resource-Intensive Operation Control**: Restricts concurrency for resource-intensive operations such as file uploads and database writes.
- **Third-Party API Call Limitation**: Controls concurrent request numbers when calling external services with rate limits.

## Main Functions

- **Prevent Server Overload**: Maintains server stability during traffic peaks by limiting concurrent requests.
- **Enhance System Reliability**: Avoids system crashes caused by resource exhaustion.
- **Optimize Resource Allocation**: Ensures critical services have sufficient resources to handle requests.

## Usage

Simply add the `max_concurrency(n)` middleware to your route, where `n` is the maximum allowed concurrent requests. Requests exceeding this limit will receive a `503 Service Unavailable` response.

_**Example Code**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/concurrency-limiter/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/concurrency-limiter/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:e608fa24b412ca88671cf77efea06bad */}