# Dateien senden

Salvo bietet verschiedene Möglichkeiten, Dateien zu senden:

import { Tab, Tabs } from '@rspress/core/theme';

### NamedFile

Salvo stellt `salvo::fs::NamedFile` bereit, um Dateien effizient an Clients zu senden. Es lädt nicht die gesamte Datei in den Cache, sondern überträgt nur Teile basierend auf dem `Range`-Header der Anfrage.

Tatsächlich ist `Response::send_file` nur eine vereinfachte Methode zur Verwendung von `NamedFile`. Wenn Sie mehr Kontrolle über den Dateiversand benötigen, können Sie `NamedFileBuilder` verwenden.

Mit `NamedFile::builder` lässt sich ein `NamedFileBuilder` erstellen:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    let builder = NamedFile::builder("/file/to/path");
}
```

Nach einigen Einstellungen kann die Datei gesendet werden:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    NamedFile::builder("/file/to/path").attached_name("image.png").send(req.headers(), res).await;
}
```

### Statische Dateien bereitstellen

Middleware, die statische oder eingebettete Dateien als Dienst bereitstellt.

- `StaticDir` unterstützt statische lokale Ordner. Es können mehrere Ordner als Parameter übergeben werden. Beispiel:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Wenn die Datei im ersten Ordner nicht gefunden wird, wird im zweiten Ordner gesucht.

- Unterstützung für `rust-embed`, zum Beispiel:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>
  `with_fallback` ermöglicht es, eine Ersatzdatei festzulegen, falls die ursprüngliche Datei nicht gefunden wird. Dies ist besonders nützlich für Single-Page-Webanwendungen.
{/* 本行由工具自动生成,原文哈希值:19063883c45fafc63ab4ff3751ac9892 */}