# Enviar archivos

Salvo puede enviar archivos de las siguientes maneras:

import { Tab, Tabs } from '@rspress/core/theme';

### NamedFile

Salvo proporciona `salvo::fs::NamedFile`, que se puede utilizar para enviar archivos al cliente de manera eficiente. No carga todo el archivo en la memoria caché, sino que carga solo partes del contenido según el `Range` de la solicitud y lo envía al cliente.

En realidad, usar `Response::send_file` es simplemente una forma simplificada de utilizar `NamedFile`. Si necesitas un control más detallado sobre el archivo que se envía, puedes usar `NamedFileBuilder`.

Puedes crear un `NamedFileBuilder` mediante `NamedFile::builder`:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    let builder = NamedFile::builder("/file/to/path");
}
```

Puedes realizar algunas configuraciones y luego enviar el archivo:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    NamedFile::builder("/file/to/path").attached_name("image.png").send(req.headers(), res).await;
}
```

### Servir archivos estáticos

Middleware que proporciona archivos estáticos o archivos incrustados como un servicio.

- `StaticDir` proporciona soporte para carpetas locales estáticas. Puede tomar una lista de múltiples carpetas como parámetro. Por ejemplo:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Si no se encuentra el archivo correspondiente en la primera carpeta, se buscará en la segunda.

- Proporciona soporte para `rust-embed`, por ejemplo:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>
  `with_fallback` permite configurar un archivo alternativo cuando no se encuentra el archivo solicitado, lo cual es útil para algunas aplicaciones de una sola página (SPA).
{/* 本行由工具自动生成,原文哈希值:19063883c45fafc63ab4ff3751ac9892 */}