# アフィックスステート リクエスト間でのデータ共有

import { Tab, Tabs } from 'rspress/theme';
import MainCode from '../../../../codes_md/affix-state/src/main.mdx';
import CargoCode from '../../../../codes_md/affix-state/Cargo.mdx';

アフィックスステートミドルウェアは、Depotに共有データを追加するために使用されます。
この機能を使用するには、Cargo.tomlで`affix-state` featureを有効にする必要があります。

## 機能解説
アフィックスステートは、リクエスト処理プロセスでデータを共有するシンプルな方法を提供します。これにより以下のことが可能になります:

- ルート設定段階でグローバル設定や共有データを注入
- 任意のハンドラでDepotを通じてこれらのデータにアクセス
- クローン可能なあらゆる型をステートデータとしてサポート

## 他フレームワークとの比較 概念の速習
| フレームワーク | 言語 | 状態管理方法 |
|------|------|-------------|
| Salvo (アフィックスステート) | Rust | Depotによる保存・アクセス、複数型対応 |
| Axum | Rust | Extensionによる状態保存、類似だが使用方法が異なる |
| Actix-web | Rust | App DataとWeb::Dataで状態共有 |
| Gin | Go | context.Setとcontext.Getでデータ存取 |
| Echo | Go | context.Setとcontext.Getで共有状態管理 |
| Spring | Java | ApplicationContextまたは@Beanアノテーションで依存関係管理 |
| Quarkus | Java | CDIと依存性注入メカニズム |
| Express.js | JavaScript | app.localsまたはreq.app.localsでグローバル状態保存 |
| Nest.js | JavaScript | 依存性注入システムで共有サービス管理 |
| Koa.js | JavaScript | ctx.stateでリクエストレベルの状態保存 |

## 一般的な使用シナリオ

- データベース接続プールの共有
- アプリケーション設定の共有
- キャッシュインスタンスの共有
- APIクライアントの共有
- グローバルカウンターや状態追跡

アフィックスステートの利点は、その簡潔さと柔軟性にあり、様々な型のデータを異なるルートやハンドラ間で簡単に共有でき、大量のボイラープレートコードを必要としません。
_**サンプルコード**_

<Tabs>
  <Tab label="main.rs">
    <MainCode/>
  </Tab>
  <Tab label="Cargo.toml">
    <CargoCode/>
  </Tab>
</Tabs>
{/* 本行由工具自动生成,原文哈希值:983c6e0b4ca9ff5e194da5a41d8d46f7 */}