import { Tab, Tabs } from '@rspress/core/theme';

# Limitation de Concurrence

Le middleware Limiteur de Concurrence permet de contrôler le nombre de requêtes simultanées. Pour les détails spécifiques de l'API, veuillez [consulter la documentation](https://docs.rs/salvo_extra/latest/salvo_extra/concurrency_limiter/index.html).

## Scénarios d'Application

Le limiteur de concurrence est particulièrement utile dans les situations suivantes :

- **Protection des Sites Web à Fort Trafic** : Limite le nombre de requêtes traitées simultanément lors de pics de trafic pour éviter la surcharge du serveur.
- **Contrôle des Opérations à Forte Consommation de Ressources** : Restreint la concurrence pour les opérations gourmandes en ressources, telles que les téléchargements de fichiers et les écritures en base de données.
- **Limitation des Appels aux API Tierces** : Contrôle le nombre de requêtes simultanées lors de l'appel à des services externes avec des limites de débit.

## Fonctions Principales

- **Prévenir la Surcharge du Serveur** : Maintient la stabilité du serveur pendant les pics de trafic en limitant les requêtes simultanées.
- **Améliorer la Fiabilité du Système** : Évite les plantages du système causés par l'épuisement des ressources.
- **Optimiser l'Allocation des Ressources** : Garantit que les services critiques disposent de ressources suffisantes pour traiter les requêtes.

## Utilisation

Ajoutez simplement le middleware `max_concurrency(n)` à votre route, où `n` est le nombre maximum de requêtes simultanées autorisées. Les requêtes dépassant cette limite recevront une réponse `503 Service Indisponible`.

_**Exemple de Code**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/concurrency-limiter/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/concurrency-limiter/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:eb0d1d053dfdeefd6150fb9fd7bb825f */}