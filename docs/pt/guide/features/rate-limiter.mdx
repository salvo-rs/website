# Controle de Tráfego

Middleware que fornece funcionalidade de controle de tráfego.

import { Tab, Tabs } from '@rspress/core/theme';

## Funcionalidades Principais

* `RateIssuer` fornece uma abstração para atribuir chaves que identificam visitantes. `RemoteIpIssuer` é uma de suas implementações, capaz de determinar o visitante com base no endereço IP da requisição. A chave não precisa ser necessariamente uma string; qualquer tipo que satisfaça as restrições `Hash + Eq + Send + Sync + 'static` pode ser usado como chave.

* `RateGuard` oferece uma abstração para algoritmos de controle de tráfego. São fornecidas implementações padrão para janela fixa (`FixedGuard`) e janela deslizante (`SlidingGuard`).

* `RateStore` fornece operações de armazenamento e recuperação de dados. `MokaStore` é uma implementação interna de cache em memória baseada em `moka`. Você também pode definir sua própria implementação.

* `RateLimiter` é uma estrutura que implementa `Handler`, contendo internamente um campo `skipper` que permite especificar requisições a serem ignoradas (que não precisam de cache). Por padrão, utiliza `none_skipper`, que não ignora nenhuma requisição.

* `QuotaGetter` fornece uma abstração para obtenção de cotas, permitindo recuperar um objeto de cota com base na chave (`Key`) do visitante. Isso significa que podemos configurar informações como cotas de usuário em um banco de dados, permitindo alterações dinâmicas e recuperação dinâmica.

_**Código de Exemplo**_ 

### Exemplo de Cota Estática

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/rate-limiter-static/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/rate-limiter-static/Cargo.toml"
  ```
  </Tab>
</Tabs>

### Exemplo de Cota Dinâmica

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/rate-limiter-dynamic/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/rate-limiter-dynamic/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:3d248fa793d9b3aab28760c03d743c7a */}