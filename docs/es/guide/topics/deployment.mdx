# Cómo desplegar aplicaciones

Un proyecto Salvo, después de compilarse, se convierte en un archivo ejecutable. Para desplegarlo, solo necesitas subir este archivo ejecutable junto con los recursos estáticos de los que depende al servidor.

Para proyectos de Rust, también existe una plataforma de despliegue muy sencilla: [shuttle.rs](https://www.shuttle.rs). Shuttle ofrece soporte para proyectos como Salvo. Para más detalles, puedes consultar la [documentación oficial](https://docs.shuttle.rs/guide/salvo-examples.html).

## Despliegue con Docker

También puedes utilizar Docker para desplegar aplicaciones Salvo. A continuación, se muestra un ejemplo básico de `Dockerfile` que puedes ajustar según las necesidades de tu proyecto:

```dockerfile
# Fase de construcción
FROM rust:slim AS build
WORKDIR /app

# Copiar archivos de dependencias y construir dependencias primero (aprovechando la caché de capas)
COPY Cargo.toml Cargo.lock ./
RUN mkdir src && \
    echo 'fn main() { println!("Placeholder"); }' > src/main.rs && \
    cargo build --release

# Copiar el código fuente real y construir la aplicación
COPY src ./src/
RUN touch src/main.rs && \
    cargo build --release

# Fase de ejecución con una imagen base ligera
FROM debian:bookworm-slim
RUN apt-get update && \
    apt-get install -y --no-install-recommends ca-certificates && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Crear un usuario no root para ejecutar la aplicación
RUN useradd -ms /bin/bash appuser
USER appuser
WORKDIR /app

# Copiar el archivo binario desde la fase de construcción
COPY --from=build /app/target/release/your_app_name ./app

# Configurar el comando de inicio del contenedor
CMD ["./app"]
```

### Instrucciones de uso

1. Guarda el `Dockerfile` anterior en el directorio raíz de tu proyecto.
2. Ajusta `your_app_name` al nombre real del archivo binario de tu proyecto.
3. Si tu aplicación requiere archivos estáticos (como plantillas, CSS, JS, etc.), puedes agregar comandos `COPY` correspondientes.
4. Si tu aplicación necesita configuración de variables de entorno, puedes usar la instrucción `ENV`.
5. Construye la imagen de Docker:
   ```bash
   docker build -t your-app-name .
   ```
6. Ejecuta el contenedor:
   ```bash
   docker run -p 5800:5800 your-app-name
   ```

Ajusta el número de puerto y otras configuraciones según las necesidades reales de tu aplicación.
{/* 本行由工具自动生成,原文哈希值:cc4f6a8bac2d9ff67911bf45b473c2bd */}