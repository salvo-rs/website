import { Tab, Tabs } from '@rspress/core/theme';

# Limitação de Concorrência

O middleware Limitador de Concorrência pode controlar o número de solicitações simultâneas. Para detalhes específicos da API, consulte [a documentação](https://docs.rs/salvo_extra/latest/salvo_extra/concurrency_limiter/index.html).

## Cenários de Aplicação

O limitador de concorrência é particularmente útil nos seguintes cenários:

- **Proteção de Sites com Alto Tráfego**: Limita o número de solicitações processadas simultaneamente durante picos de tráfego para evitar sobrecarga do servidor.
- **Controle de Operações Intensivas em Recursos**: Restringe a concorrência para operações que consomem muitos recursos, como uploads de arquivos e gravações no banco de dados.
- **Limitação de Chamadas a APIs de Terceiros**: Controla o número de solicitações simultâneas ao chamar serviços externos com limites de taxa.

## Principais Funções

- **Prevenir Sobrecarga do Servidor**: Mantém a estabilidade do servidor durante picos de tráfego, limitando as solicitações simultâneas.
- **Aumentar a Confiabilidade do Sistema**: Evita falhas no sistema causadas por esgotamento de recursos.
- **Otimizar a Alocação de Recursos**: Garante que os serviços críticos tenham recursos suficientes para processar as solicitações.

## Uso

Basta adicionar o middleware `max_concurrency(n)` à sua rota, onde `n` é o número máximo de solicitações simultâneas permitidas. Solicitações que excederem esse limite receberão uma resposta `503 Serviço Indisponível`.

_**Código de Exemplo**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/concurrency-limiter/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/concurrency-limiter/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:eb0d1d053dfdeefd6150fb9fd7bb825f */}