# Envío de Archivos

Salvo puede enviar archivos de varias maneras:

import { Tab, Tabs } from '@rspress/core/theme';

### NamedFile

Salvo proporciona `salvo::fs::NamedFile`, que se puede utilizar para enviar archivos a los clientes de manera eficiente. No carga el archivo completo en memoria; en su lugar, lee y envía solo las partes solicitadas por el cliente según la cabecera `Range`.

En la práctica, usar `Response::send_file` es una forma simplificada de utilizar `NamedFile`. Si necesitas más control sobre la entrega de archivos, puedes usar `NamedFileBuilder`.

Puedes crear un `NamedFileBuilder` mediante `NamedFile::builder`:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    let builder = NamedFile::builder("/file/to/path");
}
```

Después de configurar el builder, puedes enviar el archivo:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    NamedFile::builder("/file/to/path").attached_name("image.png").send(req.headers(), res).await;
}
```

### Servir Archivos Estáticos

Middleware para servir archivos estáticos o archivos incrustados.

- `StaticDir` proporciona soporte para servir archivos estáticos desde directorios locales. Puedes pasar una lista de múltiples directorios como argumentos. Por ejemplo:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Si un archivo no se encuentra en el primer directorio, se buscará en el segundo directorio.

- Proporciona soporte para `rust-embed`. Por ejemplo:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>
  El método `with_fallback` te permite especificar un archivo de respaldo para servir cuando no se encuentra el archivo solicitado. Esto es especialmente útil para aplicaciones de una sola página (SPA).
{/* Auto generated, origin file hash:b0d7ec4cd7a0db7f38dc82b19bff22c8 */}