# Dateien senden

Salvo bietet mehrere Möglichkeiten zum Senden von Dateien:

import { Tab, Tabs } from '@rspress/core/theme';

### NamedFile

Salvo stellt `salvo::fs::NamedFile` bereit, das effizient Dateien an Clients senden kann. Es lädt nicht die gesamte Datei in den Speicher, sondern liest und sendet nur die Teile, die vom Client basierend auf dem `Range`-Header angefordert werden.

In der Praxis ist die Verwendung von `Response::send_file` eine vereinfachte Methode zur Nutzung von `NamedFile`. Wenn Sie mehr Kontrolle über die Dateiübertragung benötigen, können Sie `NamedFileBuilder` verwenden.

Sie können einen `NamedFileBuilder` über `NamedFile::builder` erstellen:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    let builder = NamedFile::builder("/file/to/path");
}
```

Nach der Konfiguration des Builders können Sie die Datei senden:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    NamedFile::builder("/file/to/path").attached_name("image.png").send(req.headers(), res).await;
}
```

### Statische Dateien bereitstellen

Middleware zum Bereitstellen statischer oder eingebetteter Dateien.

- `StaticDir` bietet Unterstützung für das Bereitstellen statischer Dateien aus lokalen Verzeichnissen. Sie können eine Liste mehrerer Verzeichnisse als Argumente übergeben. Zum Beispiel:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Wenn eine Datei im ersten Verzeichnis nicht gefunden wird, wird sie im zweiten Verzeichnis gesucht.

- Bietet Unterstützung für `rust-embed`. Zum Beispiel:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Die Methode `with_fallback` ermöglicht es, eine Fallback-Datei anzugeben, die bereitgestellt wird, wenn die angeforderte Datei nicht gefunden wird. Dies ist besonders nützlich für Single-Page-Anwendungen (SPAs).
{/* Auto generated, origin file hash:b0d7ec4cd7a0db7f38dc82b19bff22c8 */}