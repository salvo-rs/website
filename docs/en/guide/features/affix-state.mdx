# Affix State - Shared Data in Requests  

import { Tab, Tabs } from 'rspress/theme';  
import MainCode from '../../../../codes_md/affix-state/src/main.mdx';  
import CargoCode from '../../../../codes_md/affix-state/Cargo.mdx';  

The Affix State middleware is used to add shared data to the Depot.  
To use the Affix State feature, you need to enable the `affix-state` feature in Cargo.toml.  

## Feature Overview  
Affix State provides a simple way to share data during request processing. It allows you to:  

- Inject global configurations or shared data during route setup  
- Access this data via Depot in any handler  
- Support any cloneable type as state data  

## Comparison with Other Frameworks - Quick Concept Understanding  
| Framework | Language | State Management Approach |  
|-----------|----------|----------------------------|  
| Salvo (Affix State) | Rust | Stores and accesses via Depot, supports multiple types |  
| Axum | Rust | Stores state via Extension, similar but with different usage |  
| Actix-web | Rust | Shares state using App Data and Web::Data |  
| Gin | Go | Uses context.Set and context.Get to store/retrieve data |  
| Echo | Go | Manages shared state with context.Set and context.Get |  
| Spring | Java | Manages dependencies via ApplicationContext or @Bean annotations |  
| Quarkus | Java | Uses CDI and dependency injection mechanisms |  
| Express.js | JavaScript | Stores global state in app.locals or req.app.locals |  
| Nest.js | JavaScript | Manages shared services via dependency injection system |  
| Koa.js | JavaScript | Stores request-level state in ctx.state |  

## Common Use Cases  

- Database connection pool sharing  
- Application configuration sharing  
- Cache instance sharing  
- API client sharing  
- Global counters or state tracking  

The advantage of Affix State lies in its simplicity and flexibility, allowing easy sharing of any type of data across different routes and handlers without excessive boilerplate code.  

_**Example Code**_  

<Tabs>  
  <Tab label="main.rs">  
    <MainCode/>  
  </Tab>  
  <Tab label="Cargo.toml">  
    <CargoCode/>  
  </Tab>  
</Tabs>
{/* 本行由工具自动生成,原文哈希值:983c6e0b4ca9ff5e194da5a41d8d46f7 */}