# Affix State Shared Data in Requests

import { Tab, Tabs } from '@rspress/core/theme';

The Affix State middleware is used to add shared data to the Depot.
To use the Affix State feature, you need to enable the `affix-state` feature in Cargo.toml.

## Feature Analysis
Affix State provides a simple way to share data during request processing. It allows you to:

- Inject global configurations or shared data during route configuration
- Access this data via the Depot in any handler
- Support any cloneable type as state data

## Comparison with Other Frameworks for Quick Concept Understanding
| Framework | Language | State Management Approach |
|-----------|----------|---------------------------|
| Salvo (Affix State) | Rust | Stores and accesses via Depot, supports multiple types |
| Axum | Rust | Stores state via Extension, similar but with different usage |
| Actix-web | Rust | Uses App Data and Web::Data to share state |
| Gin | Go | Uses context.Set and context.Get to store and retrieve data |
| Echo | Go | Uses context.Set and context.Get to manage shared state |
| Spring | Java | Uses ApplicationContext or @Bean annotations for dependency management |
| Quarkus | Java | Uses CDI and dependency injection mechanisms |
| Express.js | JavaScript | Uses app.locals or req.app.locals to store global state |
| Nest.js | JavaScript | Uses a dependency injection system to manage shared services |
| Koa.js | JavaScript | Uses ctx.state to store request-level state |

## Common Use Cases

- Database connection pool sharing
- Application configuration sharing
- Cache instance sharing
- API client sharing
- Global counters or state tracking

The advantage of Affix State lies in its simplicity and flexibility, allowing easy sharing of any type of data across different routes and handlers without extensive boilerplate code.
_**Example Code**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/affix-state/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/affix-state/Cargo.toml"
  ```
  </Tab>
</Tabs>