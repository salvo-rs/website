# Estado Affix - Datos compartidos en la solicitud

import { Tab, Tabs } from 'rspress/theme';
import MainCode from '../../../../codes_md/affix-state/src/main.mdx';
import CargoCode from '../../../../codes_md/affix-state/Cargo.mdx';

El middleware Affix State se utiliza para agregar datos compartidos al Depot.
Para utilizar la funcionalidad Affix State, es necesario habilitar el feature `affix-state` en Cargo.toml.

## Análisis de funcionalidad
Affix State proporciona una forma sencilla de compartir datos durante el procesamiento de solicitudes. Permite:

Inyectar configuraciones globales o datos compartidos durante la configuración de rutas
Acceder a estos datos desde cualquier manejador a través del Depot
Soporta cualquier tipo clonable como dato de estado

## Comparación con otros frameworks para comprensión rápida
| Framework | Lenguaje | Gestión de estado |
|-----------|----------|-------------------|
| Salvo (Affix State) | Rust | Almacenamiento y acceso mediante Depot, soporta múltiples tipos |
| Axum | Rust | Estado almacenado en Extension, similar pero con diferente implementación |
| Actix-web | Rust | Usa App Data y Web::Data para compartir estado |
| Gin | Go | Utiliza context.Set y context.Get para acceder a datos |
| Echo | Go | Gestiona estado compartido con context.Set y context.Get |
| Spring | Java | Usa ApplicationContext o anotación @Bean para gestión de dependencias |
| Quarkus | Java | Emplea CDI y mecanismos de inyección de dependencias |
| Express.js | JavaScript | Almacena estado global en app.locals o req.app.locals |
| Nest.js | JavaScript | Sistema de inyección de dependencias para servicios compartidos |
| Koa.js | JavaScript | Usa ctx.state para almacenar estado a nivel de solicitud |

## Casos de uso comunes

- Compartir pool de conexiones a base de datos
- Compartir configuración de aplicación
- Compartir instancias de caché
- Compartir cliente de API
- Seguimiento de contadores o estado global

La ventaja de Affix State radica en su simplicidad y flexibilidad, permitiendo compartir fácilmente cualquier tipo de datos entre diferentes rutas y manejadores sin necesidad de código repetitivo.
_**Código de ejemplo**_

<Tabs>
  <Tab label="main.rs">
    <MainCode/>
  </Tab>
  <Tab label="Cargo.toml">
    <CargoCode/>
  </Tab>
</Tabs>
{/* 本行由工具自动生成,原文哈希值:983c6e0b4ca9ff5e194da5a41d8d46f7 */}