# Affix State - Gemeinsame Daten in Anfragen

import { Tab, Tabs } from '@rspress/core/theme';

Das Affix State-Middleware wird verwendet, um gemeinsame Daten zum Depot hinzuzufügen.
Um die Affix State-Funktionalität zu nutzen, muss das `affix-state`-Feature in der Cargo.toml aktiviert werden.

## Funktionsanalyse
Affix State bietet eine einfache Möglichkeit, Daten während der Anfrageverarbeitung gemeinsam zu nutzen. Es ermöglicht Ihnen:

- Globale Konfigurationen oder gemeinsame Daten in der Routing-Konfigurationsphase zu injizieren
- Zugriff auf diese Daten über das Depot in jedem Handler
- Unterstützung für jeden klonbaren Typ als Zustandsdaten

## Konzeptverständnis im Vergleich zu anderen Frameworks
| Framework | Sprache | Zustandsverwaltung |
|-----------|---------|-------------------|
| Salvo (Affix State) | Rust | Speicherung und Zugriff über Depot, unterstützt verschiedene Typen |
| Axum | Rust | Zustandsspeicherung über Extension, ähnlich aber mit anderer Nutzung |
| Actix-web | Rust | Nutzung von App Data und Web::Data für gemeinsame Zustände |
| Gin | Go | Datenzugriff über context.Set und context.Get |
| Echo | Go | Verwaltung gemeinsamer Zustände mit context.Set und context.Get |
| Spring | Java | Abhängigkeitsverwaltung mit ApplicationContext oder @Bean-Annotation |
| Quarkus | Java | Nutzung von CDI und Dependency-Injection-Mechanismen |
| Express.js | JavaScript | Globale Zustände in app.locals oder req.app.locals |
| Nest.js | JavaScript | Verwaltung gemeinsamer Dienste durch Dependency-Injection-System |
| Koa.js | JavaScript | Speicherung anfragespezifischer Zustände in ctx.state |

## Häufige Anwendungsfälle

- Gemeinsame Nutzung von Datenbankverbindungspools
- Freigabe von Anwendungskonfigurationen
- Gemeinsame Nutzung von Cache-Instanzen
- Freigabe von API-Clients
- Globale Zähler oder Zustandsverfolgung

Der Vorteil von Affix State liegt in seiner Einfachheit und Flexibilität, die es ermöglicht, Daten beliebigen Typs mühelos zwischen verschiedenen Routen und Handlern zu teilen, ohne umfangreichen Boilerplate-Code zu benötigen.
_**Beispielcode**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/affix-state/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/affix-state/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* 本行由工具自动生成,原文哈希值:5dfff8f8a8238344561f9f829341312c */}