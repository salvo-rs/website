# Как развернуть приложения

Проект Salvo после компиляции превращается в исполняемый файл. Для развертывания достаточно загрузить этот исполняемый файл вместе с зависимыми статическими ресурсами на сервер.

Для проектов на Rust также существует очень простая платформа развертывания: [shuttle.rs](https://www.shuttle.rs). Shuttle предоставляет поддержку для проектов типа Salvo. Подробности смотрите в [официальной документации](https://docs.shuttle.rs/guide/salvo-examples.html).

## Развертывание с помощью Docker

Вы также можете использовать Docker для развертывания приложений Salvo. Ниже приведен пример базового `Dockerfile`, который можно адаптировать в соответствии с требованиями вашего проекта:

```dockerfile
# Этап сборки
FROM rust:slim AS build
WORKDIR /app

# Сначала копируем файлы зависимостей для сборки зависимостей (используя кэширование слоев)
COPY Cargo.toml Cargo.lock ./
RUN mkdir src && \
    echo 'fn main() { println!("Placeholder"); }' > src/main.rs && \
    cargo build --release

# Копируем фактический исходный код и собираем приложение
COPY src ./src/
RUN touch src/main.rs && \
    cargo build --release

# Используем легковесный базовый образ для этапа выполнения
FROM debian:bookworm-slim
RUN apt-get update && \
    apt-get install -y --no-install-recommends ca-certificates && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Создаем непривилегированного пользователя для запуска приложения
RUN useradd -ms /bin/bash appuser
USER appuser
WORKDIR /app

# Копируем бинарный файл из этапа сборки
COPY --from=build /app/target/release/your_app_name ./app

# Устанавливаем команду запуска контейнера
CMD ["./app"]
```

### Инструкции по использованию

1. Сохраните приведенный выше `Dockerfile` в корневой директории вашего проекта.
2. Измените `your_app_name` на фактическое имя бинарного файла в соответствии с вашим проектом.
3. Если ваше приложение требует статические файлы (например, шаблоны, CSS, JS и т.д.), вы можете добавить соответствующие команды `COPY`.
4. Если ваше приложение требует настройки переменных окружения, используйте инструкцию `ENV`.
5. Соберите Docker-образ:
   ```bash
   docker build -t your-app-name .
   ```
6. Запустите контейнер:
   ```bash
   docker run -p 5800:5800 your-app-name
   ```

Пожалуйста, настройте номер порта и другие конфигурации в соответствии с фактическими потребностями вашего приложения.
{/* Auto generated, origin file hash:20851c6331f7ab1d3f03251a44776b3e */}