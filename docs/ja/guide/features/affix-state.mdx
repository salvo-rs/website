# Affix State リクエスト間でのデータ共有

import { Tab, Tabs } from '@rspress/core/theme';

Affix State ミドルウェアは、Depot に共有データを追加するために使用されます。
Affix State 機能を使用するには、Cargo.toml で `affix-state` フィーチャーを有効にする必要があります。

## 機能の解説
Affix State は、リクエスト処理プロセス中にデータを共有するためのシンプルな方法を提供します。これにより以下が可能になります：

- ルート設定段階でグローバル設定や共有データを注入
- 任意のハンドラ内で Depot を通じてこれらのデータにアクセス
- クローン可能な任意の型を状態データとしてサポート

## 他のフレームワークとの比較による概念の迅速な理解
| フレームワーク | 言語 | 状態管理方法 |
|------|------|-------------|
| Salvo (Affix State) | Rust | Depot による保存とアクセス、複数の型をサポート |
| Axum | Rust | Extension による状態保存、類似しているが使用方法が異なる |
| Actix-web | Rust | App Data と Web::Data による状態共有 |
| Gin | Go | context.Set と context.Get によるデータの保存・取得 |
| Echo | Go | context.Set と context.Get による共有状態の管理 |
| Spring | Java | ApplicationContext または @Bean アノテーションによる依存関係管理 |
| Quarkus | Java | CDI と依存性注入メカニズム |
| Express.js | JavaScript | app.locals または req.app.locals によるグローバル状態の保存 |
| Nest.js | JavaScript | 依存性注入システムによる共有サービスの管理 |
| Koa.js | JavaScript | ctx.state によるリクエストレベルの状態保存 |

## 一般的な使用シナリオ

- データベース接続プールの共有
- アプリケーション設定の共有
- キャッシュインスタンスの共有
- API クライアントの共有
- グローバルカウンターや状態追跡

Affix State の利点は、その簡潔さと柔軟性にあります。大量の定型コードを必要とせず、異なるルートやハンドラ間で任意の型のデータを簡単に共有できます。
_**サンプルコード**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/affix-state/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/affix-state/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:5dfff8f8a8238344561f9f829341312c */}