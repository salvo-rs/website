---
title: Framework de Serialização Rust
---

# Serde: Framework de Serialização e Desserialização Rust

[Serde](https://docs.rs/serde/latest/serde/) é uma biblioteca central no ecossistema Rust, fornecendo um framework de serialização e desserialização eficiente e genérico. Seu nome deriva da combinação de "**Ser**ialization" e "**De**serialization".

## Principais Características

- **Generalidade**: Suporta múltiplos formatos de dados, como JSON, YAML, TOML, MessagePack, etc.
- **Abstração de Custo Zero**: O código gerado em tempo de compilação é tão eficiente quanto código escrito manualmente.
- **Flexibilidade**: Permite personalizar comportamentos de serialização e desserialização.
- **Tipagem Forte**: Utiliza o sistema de tipos do Rust para garantir integridade dos dados.
- **Ampla Adoção**: Tornou-se a biblioteca padrão para troca de dados no ecossistema Rust.

## Como Funciona

O núcleo do Serde é seu design de Representação Intermediária (Intermediate Representation), que divide o processo de serialização e desserialização em duas etapas:

1. **Serialização**: Converte estruturas de dados Rust para uma representação intermediária genérica, depois para o formato alvo.
2. **Desserialização**: Converte o formato de entrada para a representação intermediária genérica, depois para estruturas de dados Rust.

Este design permite adicionar novos formatos de dados sem modificar aplicações que utilizam o Serde.

## Uso Básico

### Configurando Dependências

```toml
[dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0" # ou outra biblioteca de formato como serde_yaml, toml, etc.
```

### Uso de Macros Derivadas

O uso mais comum é empregar macros derivadas para implementar automaticamente os traits de serialização e desserialização para structs:

```rust
use serde::{Serialize, Deserialize};

#[derive(Serialize, Deserialize, Debug)]
struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let point = Point { x: 1, y: 2 };

    // Convertendo Point para uma string JSON
    let serialized = serde_json::to_string(&point).unwrap();
    println!("Resultado serializado: {}", serialized); // Saída: {"x":1,"y":2}

    // Convertendo a string JSON de volta para Point
    let deserialized: Point = serde_json::from_str(&serialized).unwrap();
    println!("Resultado desserializado: {:?}", deserialized); // Saída: Point { x: 1, y: 2 }
}
```

### Personalização com Atributos

O Serde oferece uma rica variedade de atributos para personalizar o comportamento de serialização:

```rust
#[derive(Serialize, Deserialize, Debug)]
struct User {
    #[serde(rename = "user_id")]
    id: u64,
    
    #[serde(default)]
    name: String,
    
    #[serde(skip_serializing_if = "Option::is_none")]
    email: Option<String>,
    
    #[serde(skip)]
    temporary_data: usize,
}
```

### Formatos de Dados Suportados

O Serde integra-se com múltiplos formatos de dados, cada um com seu próprio crate:

- **serde_json**: Formato JSON
- **serde_yaml**: Formato YAML
- **toml**: Formato TOML
- **bincode**: Formato binário
- **postcard**: Formato binário otimizado para espaço
- **rmp/rmp-serde**: Formato MessagePack
- **ciborium**: Formato CBOR
- ...e outros formatos

## Uso Avançado

### Implementação Manual de Traits

Para necessidades específicas, os traits `Serialize` e `Deserialize` podem ser implementados manualmente:

```rust
use serde::{Serialize, Serializer, Deserialize, Deserializer};

struct MyType {
    // campos...
}

impl Serialize for MyType {
    fn serialize<S>(&self, serializer: S) -> Result<S::Ok, S::Error>
    where
        S: Serializer,
    {
        // Lógica de serialização personalizada
    }
}

impl<'de> Deserialize<'de> for MyType {
    fn deserialize<D>(deserializer: D) -> Result<Self, D::Error>
    where
        D: Deserializer<'de>,
    {
        // Lógica de desserialização personalizada
    }
}
```

### Mapeamento de Tipos

É possível criar mapeamentos entre diferentes representações de dados:

```rust
#[derive(Serialize, Deserialize)]
#[serde(remote = "chrono::DateTime<chrono::Utc>")]
struct DateTimeRef {
    #[serde(with = "chrono::serde::ts_seconds")]
    pub inner: chrono::DateTime<chrono::Utc>,
}
```

## Aprendizado e Recursos

O Serde é uma biblioteca rica em funcionalidades; este documento cobre apenas o básico. Para aproveitar ao máximo o Serde, recomenda-se:

1. Visitar a [Documentação Oficial do Serde](https://serde.rs/) para detalhes da API e exemplos.
2. Consultar o [Repositório no GitHub](https://github.com/serde-rs/serde) para código-fonte e atualizações mais recentes.

## Conclusão

Como uma biblioteca fundamental no ecossistema Rust, o Serde fornece ferramentas poderosas e flexíveis para troca de dados. Ao dominar o Serde, você pode lidar facilmente com diversas necessidades de intercâmbio de dados, tornando suas aplicações mais robustas e interoperáveis.
{/* Auto generated, origin file hash:02cf744a3fbae09d654887c13e131157 */}