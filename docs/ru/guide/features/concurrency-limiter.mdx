import { Tab, Tabs } from '@rspress/core/theme';

# Ограничение параллелизма

Промежуточное ПО ограничителя параллелизма позволяет контролировать количество одновременных запросов. Подробную информацию об API можно найти в [документации](https://docs.rs/salvo_extra/latest/salvo_extra/concurrency_limiter/index.html).

## Области применения

Ограничитель параллелизма особенно полезен в следующих сценариях:

- **Защита сайтов с высокой нагрузкой**: ограничивает количество одновременно обрабатываемых запросов во время пиковых нагрузок, предотвращая перегрузку сервера.
- **Контроль ресурсоёмких операций**: ограничивает параллелизм для ресурсоёмких операций, таких как загрузка файлов и запись в базу данных.
- **Ограничение вызовов сторонних API**: контролирует количество одновременных запросов при обращении к внешним сервисам с ограничениями по частоте.

## Основные функции

- **Предотвращение перегрузки сервера**: поддерживает стабильность сервера во время пиковых нагрузок за счёт ограничения одновременных запросов.
- **Повышение надёжности системы**: предотвращает сбои системы, вызванные истощением ресурсов.
- **Оптимизация распределения ресурсов**: гарантирует, что критически важные службы имеют достаточные ресурсы для обработки запросов.

## Использование

Просто добавьте промежуточное ПО `max_concurrency(n)` в свой маршрут, где `n` — максимально допустимое количество одновременных запросов. Запросы, превышающие этот лимит, будут получать ответ `503 Service Unavailable`.

_**Пример кода**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/concurrency-limiter/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/concurrency-limiter/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:eb0d1d053dfdeefd6150fb9fd7bb825f */}