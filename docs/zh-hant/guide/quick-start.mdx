import { Tab, Tabs } from '@rspress/core/theme';

# å¿«é€Ÿé–‹å§‹

## å®‰è£ Rust
å¦‚æœæ‚¨å°šæœªå®‰è£ Rustï¼Œå¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„ [`rustup`](https://doc.rust-lang.org/book/ch01-01-installation.html) å®‰è£ Rustã€‚

:::tip
ç›®å‰ Salvo æ”¯æ´çš„æœ€ä½ Rust ç‰ˆæœ¬ç‚º 1.85ã€‚è«‹åŸ·è¡Œ `rustup update` ç¢ºèªæ‚¨å·²å®‰è£ç¬¦åˆè¦æ±‚çš„ Rustã€‚
:::

## ç·¨å¯«ç¬¬ä¸€å€‹ Salvo ç¨‹å¼

å»ºç«‹ä¸€å€‹å…¨æ–°çš„å°ˆæ¡ˆï¼š

```bash
cargo new hello --bin
```

å°‡ç›¸ä¾é …ç›®åŠ å…¥ `Cargo.toml`ï¼š

```toml file="<root>/codes/hello/Cargo.toml"
```

åœ¨ `main.rs` ä¸­å»ºç«‹ä¸€å€‹ç°¡å–®çš„å‡½å¼è™•ç†å™¨ï¼Œå‘½åç‚º `hello`ï¼Œæ­¤å‡½å¼åƒ…æœƒå°å‡ºæ–‡å­— `"Hello world"`ã€‚

```rust file="<root>/codes/hello/src/main.rs"
```

æ­å–œæ‚¨ï¼Œæ‚¨çš„ç¬¬ä¸€å€‹ Salvo ç¨‹å¼å·²å®Œæˆã€‚åªéœ€åœ¨å‘½ä»¤åˆ—åŸ·è¡Œ `cargo run`ï¼Œç„¶å¾Œåœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿ `http://127.0.0.1:5800` å³å¯ã€‚

## è©³ç´°è§£è®€

æ­¤è™•çš„ `hello_world` æ˜¯ä¸€å€‹ `Handler`ï¼Œç”¨æ–¼è™•ç†ä½¿ç”¨è€…è«‹æ±‚ã€‚`#[handler]` å¯è®“å‡½å¼è¼•é¬†å¯¦ä½œ `Handler` traitï¼Œä¸¦å…è¨±æˆ‘å€‘ä»¥ä¸åŒæ–¹å¼ç°¡å¯«å‡½å¼åƒæ•¸ã€‚

- åŸå§‹å½¢å¼ï¼š

    ```rust
    #[handler]
    async fn hello(_req: &mut Request, _depot: &mut Depot, res: &mut Response, _ctrl: &mut FlowCtrl) {
        res.render("Hello world");
    }
    ```

- æ‚¨å¯ä»¥çœç•¥å‡½å¼ä¸­æœªä½¿ç”¨çš„åƒæ•¸ï¼Œä¾‹å¦‚é€™è£¡çš„ `_req`ã€`_depot`ã€`_ctrl` çš†æœªä½¿ç”¨ï¼Œå¯ç›´æ¥çœç•¥ï¼š

    ```rust
    #[handler]
    async fn hello(res: &mut Response) {
        res.render("Hello world");
    }
    ```

- ä»»ä½•å¯¦ä½œäº† `Writer` trait çš„å‹åˆ¥çš†å¯ä½œç‚ºå‡½å¼å›å‚³å‹åˆ¥ã€‚ä¾‹å¦‚ `&str` å¯¦ä½œäº† `Writer`ï¼Œç•¶å…¶ä½œç‚ºå›å‚³å€¼æ™‚ï¼Œæœƒå°å‡ºç´”æ–‡å­—ï¼š

    ```rust
    #[handler]
    async fn hello(res: &mut Response) -> &'static str {
        "Hello world"
    }
    ```

- æ›´å¸¸è¦‹çš„æƒ…æ³æ˜¯ï¼Œæˆ‘å€‘éœ€è¦å°‡ `Result<T, E>` ä½œç‚ºå›å‚³å‹åˆ¥ï¼Œä»¥ä¾¿è™•ç†å‡½å¼åŸ·è¡Œéç¨‹ä¸­çš„éŒ¯èª¤ã€‚è‹¥ `T` å’Œ `E` çš†å¯¦ä½œäº† `Writer`ï¼Œå‰‡ `Result<T, E>` å³å¯ä½œç‚ºå›å‚³å€¼ï¼š

    ```rust
    #[handler]
    async fn hello(res: &mut Response) -> Result<&'static str, ()> {
        Ok("Hello world")
    }
    ```

## éˆå‹•çš„ HTTP3

æ“šèªª HTTP3 èº«è¼•å¦‚ç‡•ï¼Œä»¤çœ¾å¤šç¨‹å¼è¨­è¨ˆå¸«å¿ƒåš®å¾€ä¹‹ï¼Œå¦‚ä»Š Salvo åŠ©æ‚¨å¯¦ç¾é¡˜æœ›ï¼Œè¼•é¬†äº«å— HTTP3 å¸¶ä¾†çš„çµ•ä½³æœå‹™ï¼

é¦–å…ˆåœ¨ `Cargo.toml` ä¸­å•Ÿç”¨ HTTP3 åŠŸèƒ½ï¼Œç„¶å¾Œå°‡ `main.rs` ä¿®æ”¹å¦‚ä¸‹ï¼š

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/hello-h3/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/hello-h3/Cargo.toml"
  ```
  </Tab>
</Tabs>

## Salvo CLI å·¥å…· ğŸ› ï¸

[Salvo CLI](https://github.com/salvo-rs/salvo-cli) æ˜¯å°ˆç‚º Salvo web æ¡†æ¶è¨­è¨ˆçš„å·¥å…·ï¼Œèƒ½å”åŠ©æ‚¨å»ºç«‹æ•´æ½”ã€æ˜“è®€çš„ç¨‹å¼ç¢¼ï¼Œç¯€çœæ™‚é–“ä»¥æŠ•å…¥ç”Ÿæ´»ä¸­æ›´æœ‰è¶£çš„äº‹ç‰©ã€‚

è‹¥æ‚¨å°æ”¹é€² CLI æœ‰ä»»ä½•æƒ³æ³•ï¼Œæˆ–ç™¼ç¾éœ€è¦è§£æ±ºçš„å•é¡Œï¼Œè«‹éš¨æ™‚æå‡º issueï¼Œæˆ‘å€‘éå¸¸æ­¡è¿æ‚¨çš„è¦‹è§£ã€‚

### ç¬¬ 1 æ­¥

å®‰è£ CLI å·¥å…·ï¼š

```bash
cargo install salvo-cli
```

### ç¬¬ 2 æ­¥

> å»ºç«‹æ–°çš„ Salvo å°ˆæ¡ˆï¼Œä½¿ç”¨ `new` æŒ‡ä»¤å¾Œæ¥æ‚¨çš„å°ˆæ¡ˆåç¨±ï¼š
>
> ```bash
> salvo new project_name
> ```

é€éé€™å€‹ç°¡æ½”çš„ CLI å·¥å…·ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿå•Ÿå‹• Salvo å°ˆæ¡ˆï¼Œå°ˆæ³¨æ–¼å¯¦ç¾æ¥­å‹™é‚è¼¯ï¼Œç„¡éœ€è²»å¿ƒå°ˆæ¡ˆçµæ§‹æ­å»ºã€‚âœ¨

## æ›´å¤šç¯„ä¾‹

å»ºè­°ç›´æ¥è¤‡è£½ Salvo å„²å­˜åº«ï¼Œç„¶å¾ŒåŸ·è¡Œ examples ç›®éŒ„ä¸‹çš„ç¯„ä¾‹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æŒ‡ä»¤å¯åŸ·è¡Œ `hello` ç¯„ä¾‹ï¼š

```sh
git clone https://github.com/salvo-rs/salvo
cd salvo/examples
cargo run --bin example-hello
```

examples ç›®éŒ„ä¸‹åŒ…å«è¨±å¤šç¯„ä¾‹ï¼Œçš†å¯é€éé¡ä¼¼ `cargo run --bin example-<name>` çš„æŒ‡ä»¤åŸ·è¡Œã€‚
{/* Auto generated, origin file hash:0c4a88ceb8e2d80be891a10caa082999 */}