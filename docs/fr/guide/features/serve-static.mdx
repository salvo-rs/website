# Serveur statique

import { Tab, Tabs } from '@rspress/core/theme';

Un middleware qui sert des fichiers statiques ou des fichiers intégrés. Pour l'API détaillée, veuillez [consulter la documentation](https://docs.rs/salvo_extra/latest/salvo_extra/request_id/index.html).

## Cas d'utilisation
Le service de fichiers statiques a de nombreuses applications dans les applications web :
- Fournir des ressources statiques pour les sites web, telles que les fichiers CSS, JavaScript, images, etc.
- Héberger des applications monopages (SPA)
- Distribuer des documents, des fichiers multimédias, des contenus téléchargeables, etc.
- Servir de solution d'hébergement complète pour des sites web simples

## Fonctionnalités principales

- `StaticDir` prend en charge les dossiers locaux statiques. Il peut accepter une liste de plusieurs dossiers comme paramètres. Par exemple :

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Si le fichier correspondant n'est pas trouvé dans le premier dossier, il sera recherché dans le deuxième dossier.

`StaticDir` prend en charge l'envoi prioritaire de fichiers compressés lorsqu'ils existent. Par exemple, s'il existe les fichiers `index.html`, `index.html.gz`, `index.html.zst`, `index.html.br`, alors `index.html.gz`, `index.html.zst`, `index.html.br` sont considérés comme des versions précompressées de `index.html`. Selon les informations de la requête, le fichier compressé correspondant sera envoyé.

- Prend en charge `rust-embed`, par exemple :

## Avantages et inconvénients de rust-embed

**Avantages :**
- Compile les fichiers statiques dans le binaire, simplifiant le déploiement
- Pas besoin de gérer séparément les fichiers statiques en production
- Peut offrir de meilleures performances (accès mémoire vs I/O disque)
- Plus sécurisé, les fichiers ne peuvent pas être modifiés accidentellement

**Inconvénients :**
- Augmente la taille du binaire de l'application
- Mettre à jour le contenu statique nécessite de recompiler et redéployer toute l'application
- Pas adapté aux contenus statiques volumineux qui changent fréquemment

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>

Il est possible de définir une page par défaut avec `default`. `with_fallback` et `fallback` permettent de spécifier un fichier de remplacement lorsqu'un fichier n'est pas trouvé, ce qui est utile pour certaines applications web monopages.
{/* Auto generated, origin file hash:42f7ce7c0dec48cc37b3300fbc400bb8 */}