# Affix State - Données partagées dans la requête

import { Tab, Tabs } from '@rspress/core/theme';

Le middleware Affix State permet d'ajouter des données partagées au Depot.
Pour utiliser la fonctionnalité Affix State, vous devez activer la feature `affix-state` dans Cargo.toml.

## Analyse des fonctionnalités
Affix State offre un moyen simple de partager des données pendant le traitement des requêtes. Il vous permet de :

- Injecter des configurations globales ou des données partagées lors de la configuration des routes
- Accéder à ces données via le Depot dans n'importe quel gestionnaire
- Prendre en charge tout type clonable comme données d'état

## Comparaison avec d'autres frameworks - Comprendre rapidement le concept
| Framework | Langage | Méthode de gestion d'état |
|-----------|---------|---------------------------|
| Salvo (Affix State) | Rust | Stockage et accès via Depot, supporte plusieurs types |
| Axum | Rust | Stockage d'état via Extension, similaire mais utilisation différente |
| Actix-web | Rust | Utilise App Data et Web::Data pour partager l'état |
| Gin | Go | Utilise context.Set et context.Get pour accéder aux données |
| Echo | Go | Utilise context.Set et context.Get pour gérer l'état partagé |
| Spring | Java | Utilise ApplicationContext ou annotations @Bean pour gérer les dépendances |
| Quarkus | Java | Utilise CDI et le mécanisme d'injection de dépendances |
| Express.js | JavaScript | Utilise app.locals ou req.app.locals pour stocker l'état global |
| Nest.js | JavaScript | Utilise un système d'injection de dépendances pour gérer les services partagés |
| Koa.js | JavaScript | Utilise ctx.state pour stocker l'état au niveau de la requête |

## Scénarios d'utilisation courants

- Partage de pool de connexions à la base de données
- Partage de configuration d'application
- Partage d'instances de cache
- Partage de clients API
- Suivi de compteurs globaux ou d'états

L'avantage d'Affix State réside dans sa simplicité et sa flexibilité, permettant de partager facilement tout type de données entre différentes routes et gestionnaires, sans nécessiter beaucoup de code standardisé.
_**Exemple de code**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/affix-state/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/affix-state/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* 本行由工具自动生成,原文哈希值:5dfff8f8a8238344561f9f829341312c */}