# Comment déployer une application

Un projet Salvo, après compilation, devient un fichier exécutable. Pour le déployer, il suffit de transférer cet exécutable ainsi que les ressources statiques dont il dépend sur le serveur.

Pour les projets Rust, il existe également une plateforme de déploiement très simple : [shuttle.rs](https://www.shuttle.rs). Shuttle prend en charge les projets de type Salvo. Pour plus de détails, consultez la [documentation officielle](https://docs.shuttle.rs/guide/salvo-examples.html).

## Déploiement avec Docker

Vous pouvez également utiliser Docker pour déployer une application Salvo. Voici un exemple de `Dockerfile` de base que vous pouvez adapter selon les besoins de votre projet :

```dockerfile
# Phase de construction
FROM rust:slim AS build
WORKDIR /app

# Copier d'abord les fichiers de dépendances pour construire les dépendances (en tirant parti du cache)
COPY Cargo.toml Cargo.lock ./
RUN mkdir src && \
    echo 'fn main() { println!("Placeholder"); }' > src/main.rs && \
    cargo build --release

# Copier le code source réel et construire l'application
COPY src ./src/
RUN touch src/main.rs && \
    cargo build --release

# Phase d'exécution avec une image de base légère
FROM debian:bookworm-slim
RUN apt-get update && \
    apt-get install -y --no-install-recommends ca-certificates && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Créer un utilisateur non-root pour exécuter l'application
RUN useradd -ms /bin/bash appuser
USER appuser
WORKDIR /app

# Copier le fichier binaire depuis la phase de construction
COPY --from=build /app/target/release/your_app_name ./app

# Définir la commande de démarrage du conteneur
CMD ["./app"]
```

### Instructions d'utilisation

1. Enregistrez le `Dockerfile` ci-dessus à la racine de votre projet.
2. Remplacez `your_app_name` par le nom réel de votre fichier binaire, selon votre projet.
3. Si votre application nécessite des fichiers statiques (comme des modèles, CSS, JS, etc.), vous pouvez ajouter les commandes `COPY` appropriées.
4. Si votre application nécessite une configuration par variables d'environnement, utilisez l'instruction `ENV`.
5. Construisez l'image Docker :
   ```bash
   docker build -t your-app-name .
   ```
6. Exécutez le conteneur :
   ```bash
   docker run -p 5800:5800 your-app-name
   ```

Ajustez le numéro de port et les autres configurations en fonction des besoins réels de votre application.
{/* Auto generated, origin file hash:cc4f6a8bac2d9ff67911bf45b473c2bd */}