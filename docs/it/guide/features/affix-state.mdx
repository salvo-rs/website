# Stato Affix - Condivisione Dati nelle Richieste

import { Tab, Tabs } from 'rspress/theme';
import MainCode from '../../../../codes_md/affix-state/src/main.mdx';
import CargoCode from '../../../../codes_md/affix-state/Cargo.mdx';

Il middleware Affix State permette di aggiungere dati condivisi al Depot.
Per utilizzare la funzionalità Affix State, è necessario abilitare la feature `affix-state` in Cargo.toml.

## Analisi Funzionale
Affix State offre un modo semplice per condividere dati durante l'elaborazione delle richieste. Consente di:

Iniettare configurazioni globali o dati condivisi durante la fase di configurazione delle route
Accedere a questi dati tramite Depot in qualsiasi handler
Supportare qualsiasi tipo clonabile come dati di stato

## Confronto con Altri Framework - Comprensione Rapida dei Concetti
| Framework | Linguaggio | Gestione dello Stato |
|-----------|------------|----------------------|
| Salvo (Affix State) | Rust | Memorizzazione e accesso tramite Depot, supporta vari tipi |
| Axum | Rust | Stato memorizzato tramite Extension, simile ma con approccio diverso |
| Actix-web | Rust | Utilizza App Data e Web::Data per condividere lo stato |
| Gin | Go | Usa context.Set e context.Get per accedere ai dati |
| Echo | Go | Gestisce lo stato condiviso con context.Set e context.Get |
| Spring | Java | Gestisce le dipendenze con ApplicationContext o annotazione @Bean |
| Quarkus | Java | Utilizza CDI e meccanismi di dependency injection |
| Express.js | JavaScript | Memorizza lo stato globale in app.locals o req.app.locals |
| Nest.js | JavaScript | Gestisce servizi condivisi con sistema di dependency injection |
| Koa.js | JavaScript | Memorizza lo stato a livello di richiesta in ctx.state |

## Scenari d'Uso Comuni

- Condivisione pool di connessioni al database
- Configurazioni applicative condivise
- Istanza di cache condivisa
- Client API condivisi
- Contatori globali o tracciamento dello stato

Il vantaggio di Affix State risiede nella sua semplicità e flessibilità, permettendo di condividere facilmente dati di qualsiasi tipo tra diverse route e handler senza necessità di codice ripetitivo.
_**Codice di Esempio**_

<Tabs>
  <Tab label="main.rs">
    <MainCode/>
  </Tab>
  <Tab label="Cargo.toml">
    <CargoCode/>
  </Tab>
</Tabs>
{/* 本行由工具自动生成,原文哈希值:983c6e0b4ca9ff5e194da5a41d8d46f7 */}