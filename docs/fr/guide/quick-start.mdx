import { Tab, Tabs } from '@rspress/core/theme';

# D√©marrage rapide

## Installer Rust
Si Rust n'est pas encore install√© sur votre machine, vous pouvez utiliser l'outil officiel (`rustup`)[https://doc.rust-lang.org/book/ch01-01-installation.html] pour l'installer.

:::tip
La version minimale de Rust prise en charge par Salvo est la 1.85. Ex√©cutez `rustup update` pour v√©rifier que vous disposez d'une version de Rust conforme aux exigences.
:::

## √âcrire votre premier programme Salvo

Cr√©ez un tout nouveau projet :

```bash
cargo new hello --bin
```

Ajoutez la d√©pendance dans `Cargo.toml`

```toml file="<root>/codes/hello/Cargo.toml"
```

Dans `main.rs`, cr√©ez un gestionnaire de fonction simple nomm√© `hello`, qui se contente d'afficher le texte `"Hello world"`.

```rust file="<root>/codes/hello/src/main.rs"
```

F√©licitations, votre premier programme Salvo est termin√©. Il vous suffit d'ex√©cuter `cargo run` en ligne de commande, puis d'ouvrir `http://127.0.0.1:5800` dans votre navigateur.

## Explication d√©taill√©e

Ici, `hello_world` est un `Handler`, utilis√© pour traiter les requ√™tes utilisateur. `#[handler]` permet √† une fonction d'impl√©menter facilement le trait `Handler`. De plus, il nous permet d'√©crire les param√®tres de la fonction de diff√©rentes mani√®res simplifi√©es.

- Forme originale :

    ```rust
    #[handler]
    async fn hello(_req: &mut Request, _depot: &mut Depot, res: &mut Response, _ctrl: &mut FlowCtrl) {
        res.render("Hello world");
    }
    ```

- Vous pouvez omettre certains param√®tres inutilis√©s dans la fonction. Par exemple, `_req`, `_depot` et `_ctrl` ne sont pas utilis√©s ici et peuvent √™tre directement supprim√©s :

    ```rust
    #[handler]
    async fn hello(res: &mut Response) {
        res.render("Hello world");
    }
    ```

- N'importe quel type peut √™tre utilis√© comme type de retour de fonction, tant qu'il impl√©mente le trait `Writer`. Par exemple, `&str` impl√©mente `Writer`. Lorsqu'il est renvoy√© comme valeur de retour, il affiche du texte brut :

    ```rust
    #[handler]
    async fn hello(res: &mut Response) -> &'static str {
        "Hello world"
    }
    ```

- Plus g√©n√©ralement, nous avons besoin de retourner un `Result<T, E>` comme type de retour, afin de g√©rer les erreurs potentielles pendant l'ex√©cution de la fonction. Si `T` et `E` impl√©mentent tous deux `Writer`, alors `Result<T, E>` peut √™tre utilis√© comme valeur de retour :
  
    ```rust
    #[handler]
    async fn hello(res: &mut Response) -> Result<&'static str, ()> {
        Ok("Hello world")
    }
    ```

## HTTP3, l'√©l√©gant

On dit que HTTP3 est l√©ger comme une plume, tant de d√©veloppeurs le d√©sirent sans l'atteindre. Cette fois, Salvo r√©alise ce souhait pour vous, vous permettant de profiter facilement des merveilleux services offerts par HTTP3 !

Commencez par activer la fonctionnalit√© HTTP3 dans `Cargo.toml`, puis modifiez `main.rs` comme suit :
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/hello-h3/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/hello-h3/Cargo.toml"
  ```
  </Tab>
</Tabs>

## L'outil CLI Salvo üõ†Ô∏è

[Salvo CLI](https://github.com/salvo-rs/salvo-cli) est un outil con√ßu pour le framework web Salvo. Il permet de cr√©er un code propre et lisible, vous faisant gagner du temps pour les choses plus int√©ressantes de la vie.

Si vous avez des id√©es pour am√©liorer le CLI, ou si vous rep√©rez des probl√®mes √† r√©soudre, n'h√©sitez pas ! Ouvrez un ticket (issue), vos insights sont les bienvenus.

### √âtape 1

Installez l'outil CLI :

```bash
cargo install salvo-cli
```

### √âtape 2

> Cr√©ez un nouveau projet Salvo en utilisant la commande `new` suivie du nom de votre projet :
>
> ```bash
> salvo new nom_du_projet
> ```

Avec cet outil CLI simple, vous pouvez d√©marrer rapidement un projet Salvo et vous concentrer sur l'impl√©mentation de votre logique m√©tier, plut√¥t que sur la mise en place de la structure du projet. ‚ú®

## Plus d'exemples

Il est recommand√© de cloner directement le d√©p√¥t Salvo, puis d'ex√©cuter les exemples du r√©pertoire `examples`. Par exemple, la commande suivante ex√©cute l'exemple `hello` :

```sh
git clone https://github.com/salvo-rs/salvo
cd salvo/examples
cargo run --bin example-hello
```

Le r√©pertoire `examples` contient de nombreux exemples. Tous peuvent √™tre ex√©cut√©s avec une commande similaire √† `cargo run --bin example-<nom>`.
{/* Êú¨Ë°åÁî±Â∑•ÂÖ∑Ëá™Âä®ÁîüÊàê,ÂéüÊñáÂìàÂ∏åÂÄº:0c4a88ceb8e2d80be891a10caa082999 */}