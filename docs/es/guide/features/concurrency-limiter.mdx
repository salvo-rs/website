import { Tab, Tabs } from '@rspress/core/theme';

# Limitar la concurrencia

El middleware Concurrency Limiter permite controlar la cantidad de solicitudes simultáneas. Para conocer la API específica, [consulta la documentación](https://docs.rs/salvo_extra/latest/salvo_extra/concurrency_limiter/index.html).

## Casos de uso

El limitador de concurrencia es especialmente útil en los siguientes escenarios:

- **Protección de sitios web con alto tráfico**: Limita el número de solicitudes procesadas simultáneamente durante picos de tráfico para evitar la sobrecarga del servidor.
- **Control de operaciones intensivas en recursos**: Restringe la concurrencia en operaciones que consumen muchos recursos, como la carga de archivos o escrituras en bases de datos.
- **Limitación de llamadas a APIs de terceros**: Controla el número de solicitudes concurrentes al utilizar servicios externos con límites de tasa.

## Funciones principales

- **Evitar la sobrecarga del servidor**: Mantiene la estabilidad del servidor durante períodos de alta demanda al limitar las solicitudes concurrentes.
- **Mejorar la fiabilidad del sistema**: Previene fallos del sistema causados por el agotamiento de recursos.
- **Optimizar la asignación de recursos**: Garantiza que los servicios críticos dispongan de recursos suficientes para procesar solicitudes.

## Cómo usarlo

Simplemente agrega el middleware `max_concurrency(n)` a la ruta, donde `n` es el número máximo de solicitudes concurrentes permitidas. Las solicitudes que superen este límite recibirán una respuesta `503 Service Unavailable`.

_**Código de ejemplo**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/concurrency-limiter/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/concurrency-limiter/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:e608fa24b412ca88671cf77efea06bad */}