# Estado Afixo Compartilhamento de Dados em Requisições

import { Tab, Tabs } from '@rspress/core/theme';

O middleware Affix State é usado para adicionar dados compartilhados ao Depot.
Para usar a funcionalidade Affix State, é necessário habilitar o recurso `affix-state` no Cargo.toml.

## Análise da Funcionalidade
O Affix State fornece uma maneira simples de compartilhar dados durante o processamento de requisições. Ele permite que você:

- Injete configurações globais ou dados compartilhados na fase de configuração de rotas
- Acesse esses dados através do Depot em qualquer manipulador
- Suporte qualquer tipo clonável como dados de estado

## Comparação com Outros Frameworks Compreensão Rápida de Conceitos
| Framework | Linguagem | Método de Gerenciamento de Estado |
|-----------|-----------|-----------------------------------|
| Salvo (Affix State) | Rust | Armazenamento e acesso via Depot, suporta múltiplos tipos |
| Axum | Rust | Armazena estado via Extension, similar mas com uso diferente |
| Actix-web | Rust | Usa App Data e Web::Data para compartilhar estado |
| Gin | Go | Usa context.Set e context.Get para armazenar/recuperar dados |
| Echo | Go | Usa context.Set e context.Get para gerenciar estado compartilhado |
| Spring | Java | Usa ApplicationContext ou anotação @Bean para gerenciar dependências |
| Quarkus | Java | Usa mecanismos CDI e injeção de dependência |
| Express.js | JavaScript | Usa app.locals ou req.app.locals para armazenar estado global |
| Nest.js | JavaScript | Usa sistema de injeção de dependência para gerenciar serviços compartilhados |
| Koa.js | JavaScript | Usa ctx.state para armazenar estado no nível da requisição |

## Cenários de Uso Comuns

- Compartilhamento de pool de conexões de banco de dados
- Compartilhamento de configurações de aplicação
- Compartilhamento de instâncias de cache
- Compartilhamento de clientes de API
- Rastreamento de contadores ou estado global

A vantagem do Affix State está em sua simplicidade e flexibilidade, permitindo compartilhar facilmente qualquer tipo de dados entre diferentes rotas e manipuladores, sem a necessidade de muito código boilerplate.
_**Código de Exemplo**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/affix-state/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/affix-state/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* 本行由工具自动生成,原文哈希值:5dfff8f8a8238344561f9f829341312c */}