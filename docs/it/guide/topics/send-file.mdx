# Invio di File

Salvo può inviare file in diversi modi:

import { Tab, Tabs } from '@rspress/core/theme';

### NamedFile

Salvo fornisce `salvo::fs::NamedFile`, che può essere utilizzato per inviare file ai client in modo efficiente. Non carica l'intero file in memoria; invece, legge e invia solo le porzioni richieste dal client in base all'intestazione `Range`.

Nella pratica, utilizzare `Response::send_file` è un modo semplificato per sfruttare `NamedFile`. Se hai bisogno di un maggiore controllo sulla consegna dei file, puoi utilizzare `NamedFileBuilder`.

Puoi creare un `NamedFileBuilder` tramite `NamedFile::builder`:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    let builder = NamedFile::builder("/file/to/path");
}
```

Dopo aver configurato il builder, puoi inviare il file:

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    NamedFile::builder("/file/to/path").attached_name("image.png").send(req.headers(), res).await;
}
```

### Servire File Statici

Middleware per servire file statici o file incorporati.

- `StaticDir` fornisce supporto per servire file statici da directory locali. Puoi passare una lista di più directory come argomenti. Ad esempio:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Se un file non viene trovato nella prima directory, verrà cercato nella seconda directory.

- Fornisce supporto per `rust-embed`. Ad esempio:
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Il metodo `with_fallback` ti consente di specificare un file di fallback da servire quando il file richiesto non viene trovato. Questo è particolarmente utile per applicazioni a pagina singola (SPA).
{/* Auto generated, origin file hash:b0d7ec4cd7a0db7f38dc82b19bff22c8 */}