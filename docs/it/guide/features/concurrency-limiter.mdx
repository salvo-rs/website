import { Tab, Tabs } from '@rspress/core/theme';

# Limitazione della Concorrenza

Il middleware Concurrency Limiter consente di controllare il numero di richieste simultanee. Per i dettagli API, consultare la [documentazione](https://docs.rs/salvo_extra/latest/salvo_extra/concurrency_limiter/index.html).

## Casi d'Uso

Il limitatore di concorrenza risulta particolarmente utile nei seguenti scenari:

- **Protezione di siti ad alto traffico**: Limita il numero di richieste elaborate simultaneamente durante picchi di traffico, prevenendo il sovraccarico del server.
- **Controllo di operazioni ad alta intensità di risorse**: Limita la concorrenza per operazioni come upload di file, scritture su database o altre attività ad alto consumo di risorse.
- **Limitazione di chiamate API esterne**: Controlla il numero di richieste simultanee quando si interagisce con servizi esterni che impongono limiti di frequenza.

## Funzioni Principali

- **Prevenire il sovraccarico del server**: Mantiene la stabilità del server durante i picchi di traffico limitando le richieste simultanee.
- **Migliorare l'affidabilità del sistema**: Evita il collasso del sistema causato dall'esaurimento delle risorse.
- **Ottimizzare l'allocazione delle risorse**: Garantisce che i servizi critici dispongano di risorse sufficienti per elaborare le richieste.

## Modalità d'Uso

È sufficiente aggiungere il middleware `max_concurrency(n)` alla rotta, dove `n` rappresenta il numero massimo di richieste simultanee consentite. Le richieste che superano questo limite riceveranno una risposta `503 Service Unavailable`.

_**Codice di Esempio**_

<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/concurrency-limiter/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/concurrency-limiter/Cargo.toml"
  ```
  </Tab>
</Tabs>
{/* Auto generated, origin file hash:e608fa24b412ca88671cf77efea06bad */}