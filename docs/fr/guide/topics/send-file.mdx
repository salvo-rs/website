# Envoi de Fichiers

Salvo permet d'envoyer des fichiers de plusieurs manières :

import { Tab, Tabs } from '@rspress/core/theme';

### NamedFile

Salvo fournit `salvo::fs::NamedFile`, qui peut être utilisé pour envoyer efficacement des fichiers aux clients. Il ne charge pas l'intégralité du fichier en mémoire ; à la place, il lit et envoie uniquement les parties demandées par le client en fonction de l'en-tête `Range`.

En pratique, utiliser `Response::send_file` est une manière simplifiée d'utiliser `NamedFile`. Si vous avez besoin d'un contrôle plus fin sur la livraison des fichiers, vous pouvez utiliser `NamedFileBuilder`.

Vous pouvez créer un `NamedFileBuilder` via `NamedFile::builder` :

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    let builder = NamedFile::builder("/file/to/path");
}
```

Après avoir configuré le builder, vous pouvez envoyer le fichier :

```rust
#[handler]
async fn send_file(req: &mut Request, res: &mut Response) {
    NamedFile::builder("/file/to/path").attached_name("image.png").send(req.headers(), res).await;
}
```

### Service de Fichiers Statiques

Middleware pour servir des fichiers statiques ou des fichiers intégrés.

- `StaticDir` fournit un support pour servir des fichiers statiques à partir de répertoires locaux. Vous pouvez passer une liste de plusieurs répertoires en arguments. Par exemple :
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-dir-list/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-dir-list/Cargo.toml"
  ```
  </Tab>
</Tabs>
  Si un fichier n'est pas trouvé dans le premier répertoire, il sera recherché dans le second.

- Fournit un support pour `rust-embed`. Par exemple :
<Tabs>
  <Tab label="main.rs">
  ```rust file="<root>/codes/static-embed-files/src/main.rs"
  ```
  </Tab>
  <Tab label="Cargo.toml">
  ```toml file="<root>/codes/static-embed-files/Cargo.toml"
  ```
  </Tab>
</Tabs>
  La méthode `with_fallback` vous permet de spécifier un fichier de secours à servir lorsque le fichier demandé n'est pas trouvé. Cela est particulièrement utile pour les applications monopages (SPA).
{/* Auto generated, origin file hash:b0d7ec4cd7a0db7f38dc82b19bff22c8 */}